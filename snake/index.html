<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Snake</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
  }
  canvas {
    background: #222;
    display: block;
  }
</style>
</head>
<body>
<canvas id="game"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

canvas.width = 600;
canvas.height = 400;

let snake = [{x: 300, y: 200}];
let direction = {x: 0, y: 0};
let speed = 2; // pixels per frame
let food = {x: Math.random()*canvas.width, y: Math.random()*canvas.height};
let snakeLength = 100; // length in pixels

document.addEventListener('keydown', e => {
    switch(e.key) {
        case 'ArrowUp': if(direction.y === 0) direction = {x:0, y:-speed}; break;
        case 'ArrowDown': if(direction.y === 0) direction = {x:0, y:speed}; break;
        case 'ArrowLeft': if(direction.x === 0) direction = {x:-speed, y:0}; break;
        case 'ArrowRight': if(direction.x === 0) direction = {x:speed, y:0}; break;
    }
});

function gameLoop() {
    // update snake head
    let head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};
    snake.unshift(head);

    // limit snake length
    let totalLength = 0;
    for(let i=0; i<snake.length-1; i++){
        let dx = snake[i+1].x - snake[i].x;
        let dy = snake[i+1].y - snake[i].y;
        totalLength += Math.sqrt(dx*dx + dy*dy);
        if(totalLength > snakeLength){
            snake = snake.slice(0, i+2);
            break;
        }
    }

    // check food collision
    let dx = head.x - food.x;
    let dy = head.y - food.y;
    if(Math.sqrt(dx*dx + dy*dy) < 10){
        snakeLength += 20;
        food = {x: Math.random()*canvas.width, y: Math.random()*canvas.height};
    }

    // check collision with self
    for(let i=1; i<snake.length; i++){
        if(Math.abs(head.x - snake[i].x) < 1 && Math.abs(head.y - snake[i].y) < 1){
            // reset game
            snake = [{x: 300, y: 200}];
            direction = {x:0, y:0};
            snakeLength = 100;
        }
    }

    // clear canvas
    ctx.fillStyle = '#222';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // draw food
    ctx.fillStyle = 'red';
    ctx.beginPath();
    ctx.arc(food.x, food.y, 8, 0, Math.PI*2);
    ctx.fill();

    // draw snake
    ctx.strokeStyle = 'lime';
    ctx.lineWidth = 10;
    ctx.lineJoin = 'round';
    ctx.beginPath();
    ctx.moveTo(snake[0].x, snake[0].y);
    for(let i=1; i<snake.length; i++){
        ctx.lineTo(snake[i].x, snake[i].y);
    }
    ctx.stroke();

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
