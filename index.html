<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Snake - zielony, bez tekstur</title>
<style>
html,body{height:100%;margin:0;background:#0b3d0b;display:flex;align-items:center;justify-content:center;font-family:Arial,Helvetica,sans-serif}
canvas{background:linear-gradient(#07330a,#0b3d0b);border-radius:8px;box-shadow:0 6px 20px rgba(0,0,0,0.4)}
#overlay{position:fixed;top:16px;left:16px;color:#bfe3b4;font-weight:700;text-shadow:0 2px 6px rgba(0,0,0,0.4)}
#hint{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);color:#dff7d9;background:rgba(0,0,0,0.12);padding:8px 12px;border-radius:999px}
</style>
</head>
<body>
<div id="overlay">Score: <span id="score">0</span>  High: <span id="high">0</span></div>
<canvas id="game" width="480" height="480"></canvas>
<div id="hint">Strzałki / WASD — kliknij lub naciśnij po śmierci aby zrestartować</div>
<script>
const cvs=document.getElementById('game');const ctx=cvs.getContext('2d');let size=20;let cols=24;let rows=24;let W=cols*size;let H=rows*size;cvs.width=W;cvs.height=H;cvs.style.width=Math.min(window.innerWidth-40,540)+'px';let dir={x:1,y:0};let snake=[{x:11,y:12},{x:10,y:12},{x:9,y:12}];let food=randomFood();let tick=150;let accumulator=0;let last=0;let score=0;let best=parseInt(localStorage.getItem('snake_high')||'0',10);document.getElementById('high').textContent=best;document.getElementById('score').textContent=score;let alive=true;function randomFood(){while(1){let f={x:Math.floor(Math.random()*cols),y:Math.floor(Math.random()*rows)};if(!snake.some(s=>s.x===f.x&&s.y===f.y))return f}}function reset(){snake=[{x:11,y:12},{x:10,y:12},{x:9,y:12}];dir={x:1,y:0};food=randomFood();tick=150;score=0;alive=true;document.getElementById('score').textContent=score}
function update(){if(!alive)return;let head={x:snake[0].x+dir.x,y:snake[0].y+dir.y};if(head.x<0||head.x>=cols||head.y<0||head.y>=rows){die();return}if(snake.some(s=>s.x===head.x&&s.y===head.y)){die();return}snake.unshift(head);if(head.x===food.x&&head.y===food.y){score++;document.getElementById('score').textContent=score;if(score>best){best=score;localStorage.setItem('snake_high',best);document.getElementById('high').textContent=best}food=randomFood();if(tick>60)tick-=3}else snake.pop()}
function die(){alive=false;ctx.fillStyle='rgba(0,0,0,0.45)';ctx.fillRect(0,0,W,H);ctx.fillStyle='#dff7d9';ctx.font='28px Arial';ctx.textAlign='center';ctx.fillText('Game Over',W/2,H/2-20);ctx.font='18px Arial';ctx.fillText('Kliknij aby zrestartować',W/2,H/2+12)}
function draw(){ctx.clearRect(0,0,W,H);for(let y=0;y<rows;y++){for(let x=0;x<cols;x++){ctx.fillStyle='#08310b';ctx.fillRect(x*size,y*size,size-1,size-1)}}for(let i=snake.length-1;i>=0;i--){let s=snake[i];let shade=Math.max(40,200- i*6);ctx.fillStyle=`rgb(0,${shade},0)`;ctx.fillRect(s.x*size+2,s.y*size+2,size-4,size-4)}ctx.fillStyle='#ff4d4d';ctx.fillRect(food.x*size+4,food.y*size+4,size-8,size-8)}
function loop(ts){if(!last)last=ts;let dt=ts-last;last=ts;accumulator+=dt;if(accumulator>1000)accumulator=1000;while(accumulator>=tick){update();accumulator-=tick}draw();requestAnimationFrame(loop)}requestAnimationFrame(loop);
window.addEventListener('keydown',e=>{if(!alive&&e.key)reset();let k=e.key.toLowerCase();if(k==='arrowup'||k==='w'){if(dir.y!==1)dir={x:0,y:-1}}else if(k==='arrowdown'||k==='s'){if(dir.y!==-1)dir={x:0,y:1}}else if(k==='arrowleft'||k==='a'){if(dir.x!==1)dir={x:-1,y:0}}else if(k==='arrowright'||k==='d'){if(dir.x!==-1)dir={x:1,y:0}}});window.addEventListener('mousedown',e=>{if(!alive)reset()});window.addEventListener('touchstart',e=>{e.preventDefault();if(!alive){reset();return}let t=e.touches[0];let rect=cvs.getBoundingClientRect();let cx=(t.clientX-rect.left)/(rect.width)*W;let cy=(t.clientY-rect.top)/(rect.height)*H;let hx=snake[0].x*size+size/2;let hy=snake[0].y*size+size/2;let dx=cx-hx;let dy=cy-hy;if(Math.abs(dx)>Math.abs(dy)){if(dx>0&&dir.x!==-1)dir={x:1,y:0};else if(dx<0&&dir.x!==1)dir={x:-1,y:0}}else{if(dy>0&&dir.y!==-1)dir={x:0,y:1};else if(dy<0&&dir.y!==1)dir={x:0,y:-1}}},{passive:false});window.addEventListener('resize',()=>{cvs.style.width=Math.min(window.innerWidth-40,540)+'px'});
</script>
</body>
</html>
